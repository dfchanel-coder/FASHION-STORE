<%- include('../partials/header') %>

<div class="admin-container fade-in">
    
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h2>Panel de Control</h2>
        <div style="display: flex; gap: 10px;">
            <a href="/admin/ordenes" class="btn" style="background-color: var(--primary);">
                <i class="fas fa-list-alt"></i> Ver Órdenes
            </a>
            <a href="/admin/logout" class="btn" style="background-color: #555;">
                <i class="fas fa-sign-out-alt"></i> Salir
            </a>
        </div>
    </div>

    <div class="admin-card" style="border-left: 5px solid var(--secondary);">
        <h3><i class="fas fa-paint-brush"></i> Personalizar Diseño</h3>
        <div class="form-grid">
            <form action="/admin/subir-logo" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label><strong>Actualizar Logo</strong> (Recomendado: PNG fondo transparente)</label>
                    <input type="file" name="logo" accept="image/png, image/jpeg" required>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Subir Logo</button>
            </form>

            <form action="/admin/subir-banner" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label><strong>Actualizar Banner</strong> (Imagen ancha para el fondo)</label>
                    <input type="file" name="banner" accept="image/png, image/jpeg" required>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Subir Banner</button>
            </form>
        </div>
    </div>

    <div class="admin-card">
        <h3><i class="fas fa-plus-circle"></i> Nuevo Producto</h3>
        <form action="/admin/crear" method="POST">
            <div class="form-grid">
                <input type="text" name="modelo" placeholder="Modelo / Nombre del Producto" required>
                <input type="text" name="imagenUrl" placeholder="URL de la imagen (Ej: https://...)" required>
            </div>
            
            <textarea name="descripcion" placeholder="Descripción del producto..." rows="2" style="margin-top: 15px;"></textarea>

            <div class="form-grid" style="margin-top: 15px; grid-template-columns: 1fr 1fr 1fr;">
                <input type="number" name="precio" step="0.01" placeholder="Precio ($)" required>
                <input type="number" name="stock" placeholder="Stock" value="1">
                <input type="text" name="tamaño" placeholder="Talle (S, M, L)">
            </div>

            <div style="margin-top: 15px;">
                <select name="categoria" required>
                    <option value="" disabled selected>Seleccione Categoría...</option>
                    <option value="ropa">Ropa</option>
                    <option value="juguete">Juguete</option>
                    <option value="electrodomesticos">Electrodomésticos</option>
                    <option value="otros">Otros</option>
                </select>
            </div>

            <button type="submit" class="btn" style="margin-top: 20px; width: 100%;">Guardar Producto</button>
        </form>
    </div>

    <div class="admin-card">
        <h3><i class="fas fa-boxes"></i> Inventario (<%= productos.length %>)</h3>
        <div class="table-responsive">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th width="10%">Img</th>
                        <th>Modelo</th>
                        <th>Cat</th>
                        <th>Precio</th>
                        <th>Stock</th>
                        <th width="10%">Acción</th>
                    </tr>
                </thead>
                <tbody>
                    <% productos.forEach(p => { %>
                        <tr>
                            <td>
                                <img src="<%= p.imagenUrl || '/images/logo.png' %>" alt="img" style="width: 40px; height: 40px; object-fit: cover; border-radius: 4px;">
                            </td>
                            <td>
                                <strong><%= p.modelo %></strong>
                                <div style="font-size: 0.8rem; color: #888;"><%= p.tamaño %></div>
                            </td>
                            <td><span style="background: #eee; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem;"><%= p.categoria %></span></td>
                            <td style="font-weight: bold; color: var(--secondary);">$<%= p.precio %></td>
                            <td><%= p.stock %></td>
                            <td>
                                <form action="/admin/eliminar/<%= p.id %>" method="POST" onsubmit="return confirm('¿Borrar?');">
                                    <button style="background: #ff6b6b; color: white; border: none; padding: 6px 10px; border-radius: 4px; cursor: pointer;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>

</div>

<%- include('../partials/footer') %>