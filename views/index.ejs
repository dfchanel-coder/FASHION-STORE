<%- include('partials/header') %>

<main>
    <% if (novedades && novedades.length > 0) { %>
        <section class="slider-section fade-in">
            <div class="slider-container">
                <% novedades.forEach((nov, index) => { %>
                    <div class="slide fade <%= index === 0 ? 'active' : '' %>">
                        <img src="<%= nov.imagenUrl || '/images/logo.png' %>" alt="<%= nov.modelo %>" class="slide-img">
                        <div class="slide-content">
                            <span class="new-badge">Novedad</span>
                            <h2><%= nov.modelo %></h2>
                            <p class="slide-price">$<%= nov.precio %></p>
                        </div>
                    </div>
                <% }) %>
            </div>
        </section>
    <% } %>

    <section id="catalogo" class="container" style="padding: 50px 0;">
        <h2 class="section-title">Colección Completa</h2>
        
        <div class="grid">
            <% productos.forEach(prod => { %>
                <div class="card fade-in">
                    <div class="card-img-container">
                        <img src="<%= prod.imagenUrl || '/images/logo.png' %>" alt="<%= prod.modelo %>">
                        <span class="cat-badge"><%= prod.categoria %></span>
                    </div>
                    
                    <div class="card-body">
                        <h3><%= prod.modelo %></h3>
                        <p class="size-text"><%= prod.tamaño || 'Talle Único' %></p>
                        <div class="price">$<%= prod.precio %></div>
                        
                        <form action="/carrito/agregar" method="POST">
                            <input type="hidden" name="id" value="<%= prod.id %>">
                            <button type="submit" class="btn btn-compact">
                                <i class="fas fa-shopping-cart"></i> Agregar
                            </button>
                        </form>
                    </div>
                </div>
            <% }) %>
        </div>
    </section>
</main>

<script>
    let slideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    if (slides.length > 0) {
        setInterval(() => {
            slides[slideIndex].classList.remove('active');
            slideIndex = (slideIndex + 1) % slides.length;
            slides[slideIndex].classList.add('active');
        }, 4000); 
    }
</script>

<%- include('partials/footer') %>